FROM ubuntu:22.04

ENV TZ=America/Sao_Paulo

RUN ln -snf /usr/share/zoneinfo/$TZ /etc/localtime && echo $TZ > /etc/timezone

RUN apt update && apt install -y curl git unzip xz-utils zip libglu1-mesa openjdk-8-jdk wget

# RUN useradd -ms /bin/bash developer
# USER developer
WORKDIR /app

RUN git clone https://github.com/flutter/flutter.git

ENV PATH "$PATH:/app/flutter/bin"


COPY . .

RUN flutter pub get

RUN flutter build web

# Crie um diret칩rio tempor치rio para os arquivos de build
# RUN mkdir -p /app/build/web

# # Copie os arquivos de build para o diret칩rio tempor치rio
# RUN cp -r build/web/* /app/build/web/

# Expor a porta 5000 para o Flutter Web
EXPOSE 5000

# Comando para iniciar o servidor Flutter
CMD ["flutter", "run", "-d", "web-server", "--web-port", "5000", "--web-hostname", "0.0.0.0"]